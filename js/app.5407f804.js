(function(){var t={7340:function(t,a,e){"use strict";var n=e(9242),c=e(3396),r=e(4870),o=e(2483),l={__name:"App",setup(t){const a=(0,o.yj)();return(t,e)=>((0,c.wg)(),(0,c.j4)((0,r.SU)(o.MA),{key:(0,r.SU)(a).path},{default:(0,c.w5)((({Component:t})=>[(0,c.Wm)(n.uT,null,{default:(0,c.w5)((()=>[((0,c.wg)(),(0,c.j4)((0,c.LL)(t)))])),_:2},1024)])),_:1}))}};const i=l;var s=i,u=e(7139);const p=t=>((0,c.dD)("data-v-4bc901fe"),t=t(),(0,c.Cn)(),t),m={key:0,class:"app-page-home"},d={class:"app-catalog"},g={class:"app-catalog__section"},_={class:"app-catalog__exchange-wrapper"},f={class:"app-catalog__title"},v=p((()=>(0,c._)("span",{class:"app-catalog__title"},(0,u.zw)("Фиксация курса: "),-1))),C=p((()=>(0,c._)("h2",{class:"app-catalog__title"},"Каталог товаров",-1))),h={class:"app-catalog__categories"},D={class:"app-catalog-category__title"},T={class:"app-catalog-category__list"};function y(t,a,e,r,o,l){const i=(0,c.up)("AppGoodsItem"),s=(0,c.up)("AppCart");return r.isPageDataLoaded?((0,c.wg)(),(0,c.iD)("div",m,[(0,c._)("div",d,[(0,c._)("div",g,[(0,c._)("div",_,[(0,c._)("p",f," Курс валюты: "+(0,u.zw)(r.exchangeValue)+" руб. ",1),(0,c._)("label",null,[v,(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>r.manualExchangeValue=t),type:"tel",placeholder:"Свой курс не задан",maxlength:"10",class:"app-catalog__title app-catalog__manual-value"},null,512),[[n.nr,r.manualExchangeValue]])])]),C,(0,c._)("div",h,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.categoryList,(t=>((0,c.wg)(),(0,c.iD)("div",{class:"app-catalog__category app-catalog-category",key:t.id},[(0,c._)("h2",D,(0,u.zw)(t),1),(0,c._)("ul",T,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.sortCatalog(r.catalogData,t),(t=>((0,c.wg)(),(0,c.j4)(i,{key:t.id,itemData:t,class:"app-catalog-category__item"},null,8,["itemData"])))),128))])])))),128))])]),(0,c.Wm)(s,{class:"app-catalog__section"})])])):(0,c.kq)("",!0)}e(7658);var P=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}');const w={codePrice:"C",codeGroup:"G",codeName:"N",codeId:"T",codeTypes:"B",codeStorageCount:"P"};function S(t,a){let e=t+Math.random()*(a+1-t);return Math.floor(e)}function N(t,a){return t*a.value}function U(t){return t.toLocaleString()}function I(t,a){let e=t.id;return a.findIndex((t=>t.id===e))}var x=JSON.parse('{"B4":{"Z":[{"B":false,"C":158,"CV":null,"G":1,"P":1,"Pl":null,"T":1},{"B":false,"C":197,"CV":null,"G":1,"P":99,"Pl":null,"T":2},{"B":false,"C":18,"CV":null,"G":1,"P":31,"Pl":null,"T":3},{"B":false,"C":2.14,"CV":null,"G":2,"P":15,"Pl":null,"T":8},{"B":false,"C":1.52,"CV":null,"G":2,"P":76,"Pl":null,"T":86},{"B":false,"C":5.5,"CV":null,"G":2,"P":100,"Pl":null,"T":126},{"B":false,"C":2.71,"CV":null,"G":5,"P":51,"Pl":null,"T":184},{"B":false,"C":3.95,"CV":null,"G":5,"P":2,"Pl":null,"T":185},{"B":false,"C":1.22,"CV":null,"G":10,"P":51,"Pl":null,"T":194},{"B":false,"C":1.18,"CV":null,"G":15,"P":55,"Pl":null,"T":12},{"B":false,"C":1.55,"CV":null,"G":15,"P":64,"Pl":null,"T":63},{"B":false,"C":1.55,"CV":null,"G":15,"P":77,"Pl":null,"T":64}]}}');const{codePrice:b,codeStorageCount:V}=w,B=()=>{const t=(0,r.iH)(!1),a=(0,r.iH)([]),e=(0,r.iH)(0),n=()=>{const n=x.B4.Z;e.value=new Date/1e3,a.value=n,t.value=!0};return n(),setInterval((()=>{x.B4.Z[S(0,11)][b]=S(0,99),x.B4.Z[S(0,11)][V]=S(0,10)}),2e3),{rawCatalog:a,isPageDataLoaded:t,getDataFromFile:n,updateStamp:e}},k=()=>{const t=/^[\d.,:]*$/,a=(0,r.iH)(80),e=(0,r.iH)(),n=(0,r.iH)(),o=(0,c.Fl)((()=>(0,r.SU)(e)&&t.test((0,r.SU)(e))&&0!==(0,r.SU)(e)?(n.value=(0,r.SU)(e),(0,r.SU)(e)):(0,r.SU)(e)&&!t.test((0,r.SU)(e))?(e.value=e.value.slice(0,-1),0===(0,r.SU)(e).length?(0,r.SU)(a):(0,r.SU)(e)):(0,r.SU)(a)));return{startExchangeValue:a,manualExchangeValue:e,exchangeValue:o}},{codePrice:L,codeGroup:G,codeName:O,codeId:E,codeTypes:j,codeStorageCount:F}=w,{isPageDataLoaded:H,rawCatalog:A,updateStamp:z,getDataFromFile:q}=B(),{startExchangeValue:W,exchangeValue:Z,manualExchangeValue:Q}=k();setInterval((()=>{q(),W.value=S(60,80)}),15e3);const M=(0,r.qj)((0,r.SU)(A).map((function(t){const a=(0,r.qj)({});return a.id=t[E],a.count=(0,r.iH)(t[F]),a.price=(0,r.iH)(t[L]),a.name=(0,r.iH)(P[t[G]][j][t[E]][O]),a.category=(0,r.iH)(P[t[G]][G]),a}))),Y=()=>{(0,r.SU)(M).forEach((function(t){let a=t.id,e=(0,r.SU)(A).findIndex((t=>t[E]===a));-1!==e&&(t.price=(0,r.SU)(A)[e][L],t.count=(0,r.SU)(A)[e][F])}))};(0,c.YP)(z,Y);const $=()=>({isPageDataLoaded:H,clearCatalogData:M,exchangeValue:Z,manualExchangeValue:Q}),{clearCatalogData:J,exchangeValue:K,isPageDataLoaded:X}=$(),R=(0,r.qj)({marketCatalog:J,isPageDataLoaded:X,cartData:{cartList:(0,r.qj)([])},settings:{exchangeValue:K}}),tt={class:"app-goods-item"},at={class:"app-goods-item__name"};function et(t,a,e,n,r,o){const l=(0,c.up)("UiButton");return(0,c.wg)(),(0,c.iD)("div",tt,[(0,c._)("div",at,(0,u.zw)(e.itemData.name)+" ( "+(0,u.zw)(e.itemData.count)+" ) ",1),(0,c._)("div",{class:(0,u.C_)([n.priceClasses,"app-goods-item__price"])},(0,u.zw)(n.convertPrice(n.itemExchangedPrice)),3),(0,c.Wm)(l,{onClick:a[0]||(a[0]=t=>n.addItemToCart(e.itemData,n.cartData)),buttonType:"add-cart",icon:"cart",class:"app-goods-item__add-cart"})])}const nt=["src"],ct={class:"ui-button__desc"};function rt(t,a,n,r,o,l){return(0,c.wg)(),(0,c.iD)("button",{class:(0,u.C_)(["ui-button",r.uiButtonClasses])},[n.icon?((0,c.wg)(),(0,c.iD)("img",{key:0,src:e(6507)(`./icon-${n.icon}.svg`),class:"ui-button__icon"},null,8,nt)):(0,c.kq)("",!0),(0,c._)("span",ct,[(0,c.WI)(t.$slots,"desc")])],2)}var ot={name:"UiButton",props:{noDesc:{type:Boolean,default:!1},icon:{type:String,default:""},buttonType:{type:String,default:""}},setup(t){const a=[t.buttonType?`ui-button--${t.buttonType}`:""];return{uiButtonClasses:a}}},lt=e(89);const it=(0,lt.Z)(ot,[["render",rt]]);var st=it;const{exchangeValue:ut}=$(),pt=(t,a)=>{let e=t.id;const n=(0,r.qj)({id:t.id,itemQuantity:(0,r.iH)(1),itemCategory:(0,r.iH)(t.category),itemName:(0,r.iH)(t.name),itemPrice:(0,c.Fl)((()=>+N((0,r.SU)(t.price),ut).toFixed(2))),itemOverallPrice:(0,c.Fl)((()=>(0,r.SU)(n.itemQuantity)*(0,r.SU)(n.itemPrice))),itemData:t});if(a.cartList.length>0){let t=a.cartList.findIndex((t=>t.id===e));-1!==t?a.cartList[t].itemQuantity++:a.cartList.push(n)}else a.cartList.push(n)};var mt={name:"AppGoodsItem",components:{UiButton:st},props:{itemData:{type:Object}},setup(t){const{exchangeValue:a}=$(),e=(0,c.Fl)((()=>+N((0,r.SU)(t.itemData.price),a).toFixed(2))),n=(0,r.SU)(R).cartData;let o=(0,r.SU)(t.itemData).price;const l=(0,c.Fl)((()=>{let a=(0,r.SU)(t.itemData).price,e=a>(0,r.SU)(o);return o=a,e})),i=(0,c.Fl)((()=>({"app-goods-item__price--incr":(0,r.SU)(l),"app-goods-item__price--decr":!(0,r.SU)(l)})));return{cartData:n,priceClasses:i,itemExchangedPrice:e,convertPrice:U,addItemToCart:pt}}};const dt=(0,lt.Z)(mt,[["render",et],["__scopeId","data-v-41db8036"]]);var gt=dt;const _t=t=>((0,c.dD)("data-v-7d8aa3d6"),t=t(),(0,c.Cn)(),t),ft={class:"app-cart"},vt={class:"app-cart__content"},Ct={key:0,class:"app-cart__sub-title"},ht={key:1},Dt=_t((()=>(0,c._)("h3",{class:"app-cart__sub-title"}," Список добавленных товаров: ",-1))),Tt={start:"1",class:"app-cart__order-list"},yt={class:"app-cart__sum"};function Pt(t,a,e,n,r,o){const l=(0,c.up)("AppCartItem");return(0,c.wg)(),(0,c.iD)("div",ft,[(0,c._)("div",vt,[n.cartEmpty?((0,c.wg)(),(0,c.iD)("h3",Ct," Товары в корзине отсутствуют. ")):(0,c.kq)("",!0),n.cartEmpty?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("div",ht,[Dt,(0,c._)("ol",Tt,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.cartList,(t=>((0,c.wg)(),(0,c.j4)(l,{key:t.id,cartItemData:t},null,8,["cartItemData"])))),128))]),(0,c._)("div",yt," ИТОГО: "+(0,u.zw)(n.convertPrice(n.cartOverallSum))+" р. ",1)]))])])}const wt={class:"app-cart-item__name"},St={class:"app-cart-item__params"},Nt={class:"app-cart-item__count-wrapper"},Ut={class:"app-cart-item__count"},It={class:"app-cart-item__price-overall"};function xt(t,a,e,n,r,o){const l=(0,c.up)("UiButton");return(0,c.wg)(),(0,c.iD)("li",{class:(0,u.C_)([n.cartItemClasses,"app-cart-item"])},[(0,c._)("p",wt," ("+(0,u.zw)(e.cartItemData.itemCategory)+") "+(0,u.zw)(e.cartItemData.itemName),1),(0,c._)("div",St,[(0,c._)("div",Nt,[(0,c.Wm)(l,{onClick:a[0]||(a[0]=t=>n.cartItemDecr(e.cartItemData)),icon:"minus",buttonType:"change-count",class:"app-cart-item__count-change"}),(0,c._)("span",Ut,(0,u.zw)(e.cartItemData.itemQuantity),1),(0,c.Wm)(l,{onClick:a[1]||(a[1]=t=>n.cartItemIncr(e.cartItemData)),icon:"plus",buttonType:"change-count",class:"app-cart-item__count-change"})]),(0,c._)("span",It,(0,u.zw)(n.convertPrice(e.cartItemData.itemOverallPrice))+" р. ",1),(0,c.Wm)(l,{onClick:a[2]||(a[2]=t=>n.cartItemDelete(e.cartItemData,n.cartList)),class:"app-cart-item__delete"},{desc:(0,c.w5)((()=>[(0,c.Uk)(" Удалить ")])),_:1})])],2)}var bt={name:"AppCartItem",components:{UiButton:st},props:{cartItemData:Object},setup(t){const a=R.cartData.cartList,e=t=>{t.itemQuantity++},n=t=>{t.itemQuantity>1&&t.itemQuantity--},o=(t,a)=>{let e=I(t,a);a.splice(e,1)},l=R.marketCatalog,i=(0,c.Fl)((()=>{const a=(0,r.SU)(t.cartItemData).itemQuantity,e=I((0,r.SU)(t.cartItemData),(0,r.SU)(l)),n=(0,r.SU)(l)[e].count;return a>n})),s=(0,c.Fl)((()=>({"app-cart-item--error":(0,r.SU)(i)})));return{cartItemIncr:e,cartItemDecr:n,cartItemDelete:o,convertPrice:U,cartList:a,cartItemClasses:s,isCountError:i}}};const Vt=(0,lt.Z)(bt,[["render",xt]]);var Bt=Vt,kt={name:"AppCart",components:{AppCartItem:Bt},setup(){const t=R.cartData.cartList,a=(0,c.Fl)((()=>0===R.cartData.cartList.length)),e=(0,c.Fl)((()=>{if(t.length>0){let t=0;return R.cartData.cartList.forEach((function(a){t+=(0,r.SU)(a.itemOverallPrice)})),t}return 0}));return{cartOverallSum:e,cartList:t,cartEmpty:a,convertPrice:U}}};const Lt=(0,lt.Z)(kt,[["render",Pt],["__scopeId","data-v-7d8aa3d6"]]);var Gt=Lt,Ot={name:"PageHome",components:{AppGoodsItem:gt,AppCart:Gt},setup(){const{manualExchangeValue:t,exchangeValue:a,isPageDataLoaded:e}=$(),n=R.marketCatalog,r=(0,c.Fl)((()=>{let t=[];return R.marketCatalog.forEach((function(a){t.push(a.category)})),[...new Set(t)]})),o=(t,a)=>t.filter((function(t){return t.category===a}));return{catalogData:n,isPageDataLoaded:e,exchangeValue:a,categoryList:r,manualExchangeValue:t,sortCatalog:o}}};const Et=(0,lt.Z)(Ot,[["render",y],["__scopeId","data-v-4bc901fe"]]);var jt=Et;const Ft={class:"app-body"};var Ht={__name:"ViewHome",setup(t){return(t,a)=>((0,c.wg)(),(0,c.iD)("div",Ft,[(0,c.Wm)(jt)]))}};const At=Ht;var zt=At;const qt={history:(0,o.r5)(),routes:[{path:"/",name:"home",component:zt}]},Wt=(0,o.p7)(qt);var Zt=Wt;const Qt=(0,n.ri)(s);Qt.use(Zt),Qt.mount("#app")},6507:function(t,a,e){var n={"./icon-cart.svg":6623,"./icon-minus.svg":1003,"./icon-plus.svg":5007};function c(t){var a=r(t);return e(a)}function r(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}c.keys=function(){return Object.keys(n)},c.resolve=r,t.exports=c,c.id=6507},6623:function(t,a,e){"use strict";t.exports=e.p+"img/icon-cart.638a94a3.svg"},1003:function(t,a,e){"use strict";t.exports=e.p+"img/icon-minus.967fb03c.svg"},5007:function(t,a,e){"use strict";t.exports=e.p+"img/icon-plus.f21a825c.svg"}},a={};function e(n){var c=a[n];if(void 0!==c)return c.exports;var r=a[n]={exports:{}};return t[n].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(a,n,c,r){if(!n){var o=1/0;for(u=0;u<t.length;u++){n=t[u][0],c=t[u][1],r=t[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&r||o>=r)&&Object.keys(e.O).every((function(t){return e.O[t](n[i])}))?n.splice(i--,1):(l=!1,r<o&&(o=r));if(l){t.splice(u--,1);var s=c();void 0!==s&&(a=s)}}return a}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,c,r]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.p="/test_shop-2_vue/"}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,n){var c,r,o=n[0],l=n[1],i=n[2],s=0;if(o.some((function(a){return 0!==t[a]}))){for(c in l)e.o(l,c)&&(e.m[c]=l[c]);if(i)var u=i(e)}for(a&&a(n);s<o.length;s++)r=o[s],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(u)},n=self["webpackChunktest_shop_2_vue"]=self["webpackChunktest_shop_2_vue"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(7340)}));n=e.O(n)})();
//# sourceMappingURL=app.5407f804.js.map